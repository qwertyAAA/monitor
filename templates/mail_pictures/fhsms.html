{% extends 'base.html' %}

{% block content %}
    <!-- 导入 -->
    <link rel="stylesheet" href="/static/mail/mail_modal.css"/>
    <span class="input-icon">
            <input type="text" placeholder="这里输入关键词" class="nav-search-input"
                   id="nav-search-input" autocomplete="off" name="keywords">
            <i class="ace-icon fa fa-search nav-search-icon"></i>
    </span>
    <div class="mail_list" style="margin-top: 20px; text-align: center">
        <div class="table-responsive">
            <table class="table table-bordered tale_inquiry">
                <thead>
                <th><input type="checkbox" id="checkbox_on"></th>
                <th>序号</th>
                <th>发信人</th>
                <th>收信人</th>
                <th>发信时间</th>
                <th>状态</th>
                <th>操作</th>
                </thead>
                <tbody>
                {% for mail in mail_list %}
                    <tr>
                        <td><input type="checkbox" value="{{ mail.id }}" id="onclick_checkbox"
                                   name="onclick_checkbox"></td>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ mail.to_user }}</td>
                        <td>{{ mail.from_user.user.username }}</td>
                        <td>{{ mail.create_time }}</td>
                        <td>{{ mail.status_id.status }}</td>
                        <td>
                            <a href="#">查看</a>
                            <a href="#">回复</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- 发送邮箱弹出模态框 -->
    <button type="button" class="btn btn-primary btn-lg mail_btn" data-toggle="modal"
            data-target="#myModal" id="many_del1">
        <i class="ace-icon fa fa-envelope-o bigger-10" title="发送站内信"></i>
    </button>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content mail_modal">
                <form method="post" action="">
                    {% csrf_token %}
                    <div class="modal-header">
                        标题：<input type="text" name="title">
                        邮箱：<input type="email" name="from_user">
                        <input type="text" name="status_id" value="{{ status_list.nid }}" style="display: none">
                    </div>
                    <div class="modal-body">
                        <label>文章内容</label>
                        <textarea name="content" id="content" cols="60" rows="20"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="submit" class="btn btn-primary">发送</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- 多选删除按钮 -->
    <button type="button" class="btn btn-primary" id="many_del">全部删除</button>
    <script charset="utf-8" src="/static/kindeditor/kindeditor-all.js"></script>
    <script>
        //$('你的input的class或id').datetimepicker({});
        KindEditor.ready(function (K) {
            window.editor = K.create('#content', {
                width: "800px",
                height: "500px",
                resizeType: 0,
                uploadJson: '/upload/',
                extraFileUploadParams: {
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                filePostName: 'upload_img',
                items: [
                    'source', '|', 'undo', 'redo', '|', 'preview', 'print', 'template', 'code', 'cut', 'copy', 'paste',
                    'plainpaste', 'wordpaste', '|', 'justifyleft', 'justifycenter', 'justifyright',
                    'justifyfull', 'insertorderedlist', 'insertunorderedlist', 'indent', 'outdent', 'subscript',
                    'superscript', 'clearhtml', 'quickformat', 'selectall', '|', 'fullscreen', '/',
                    'formatblock', 'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold',
                    'italic', 'underline', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage',
                    'flash', 'media', 'insertfile', 'table', 'hr', 'emoticons', 'baidumap', 'pagebreak',
                    'anchor', 'link', 'unlink', '|', 'about'
                ]
            });
        });
    </script>
{% endblock %}
